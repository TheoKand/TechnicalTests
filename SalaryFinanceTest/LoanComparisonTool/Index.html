<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Loan Comparison Tool</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>
    <div class="container margin-top-30">
        <div class="row">

            <div class="well col-md-12">
                <h1>Loan Comparison Tool</h1> This calculator will show you how much better off you are using SalaryFinance to repay your debts. Please enter your credit card balance, annual percentage rate (APR) and your current monthly payment. The calculation is based on a SalaryFinance
                loan with an identical monthly payment to your current one.
            </div>

            <div id="InputArea">

                <div class="col-md-6">
                    <h3>Credit Card Debt</h3>
                    <div class="row">
                        <div class="text-right col-sm-3">
                            Balance <strong>&pound;</strong>
                        </div>
                        <div class="col-sm-9">
                            <input type="text" id="txtCCBalance" class="form-control" />
                        </div>

                        <div class="text-right col-sm-3">
                            APR
                        </div>
                        <div class="col-sm-9">
                            <input type="text" id="txtCCAPR" class="form-control" />
                        </div>

                        <div class="text-right col-sm-3">
                            Mo. Payment <strong>&pound;</strong>
                        </div>
                        <div class="col-sm-9">
                            <input type="text" id="txtCCMonthlyPayment" class="form-control" />
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <h3>Salary Finance Loan</h3>
                    <div class="row">
                        <div class="text-right col-sm-3">
                            Loan <strong>&pound;</strong>
                        </div>
                        <div class="col-sm-9">
                            <input type="text" id="txtSFBalance" class="form-control  " readonly />
                        </div>
                        <div class="text-right col-sm-3">
                            APR
                        </div>
                        <div class="col-sm-9">
                            <input type="text" id="txtSFAPR" class="form-control" value="7.9" readonly />
                        </div>

                        <div class="text-right col-sm-3">
                            Mo. Salary Deduction <strong>&pound;</strong>
                        </div>
                        <div class="col-sm-9">
                            <input type="text" id="txtSFMonthlySalaryDeduction" class="form-control" readonly />
                        </div>
                    </div>
                </div>

                <div class="col-md-12 text-center">
                    <a id="btnGo" class="btn btn-primary margin-top-10">HOW MUCH COULD I SAVE ?</a>
                </div>

            </div>

        </div>
        <div id="ResultArea" class="row margin-top-30" style="display:none;">

            <div class="col-md-12 text-center">
                <a id="btnBack" class="btn margin-top-10">Back</a>
            </div>

            <div class="col-md-6 text-center text-danger">
                <div id="CCResult">
                </div>
                <button type="button" class="btn collapsed" data-toggle="collapse" data-target="#CCDetails" aria-expanded="false">More ...</button>
                <div id="CCDetails" class="collapse margin-top-10" aria-expanded="false">
                </div>
            </div>
            <div class="col-md-6 text-center text-success">
                <div id="SFResult">
                </div>
                <a class="btn btn-success" href="https://www.salaryfinance.com/contact">Join SalaryFinance</a>
                <button type="button" class="btn collapsed" data-toggle="collapse" data-target="#SFDetails" aria-expanded="false">More ...</button>
                <div id="SFDetails" class="collapse margin-top-10" aria-expanded="false">
                </div>
            </div>
        </div>
    </div>
</body>
</html>

<script type="text/javascript">

    $(document).ready(function () {

        //Initialize some elements
        $('#txtCCBalance').keyup(function () {
            $('#txtSFBalance').val($(this).val());
        });

        $('#txtCCMonthlyPayment').keyup(function () {
            $('#txtSFMonthlySalaryDeduction').val($(this).val());
        });

        $("#btnBack").click(function () {
            $("#ResultArea").hide();
            $("#InputArea").show();
        });

        $('#txtCCBalance').focus();

        //When the button is clicked, make the calculations and show the relevant area
        $("#btnGo").click(function () {

            //validation
            var isOk = true;
            if ($('#txtCCBalance').val().trim().length == 0 || isNaN($('#txtCCBalance').val()) || $('#txtCCBalance').val().toString().indexOf('.') != -1)
                isOk = false;
            else if ($('#txtCCAPR').val().trim().length == 0 || isNaN($('#txtCCAPR').val()) || $('#txtCCAPR').val().toString().indexOf('.') != -1)
                isOk = false;
            else if ($('#txtCCMonthlyPayment').val().trim().length == 0 || isNaN($('#txtCCMonthlyPayment').val()) || $('#txtCCMonthlyPayment').val().toString().indexOf('.') != -1)
                isOk = false;

            if (isOk) {
                var debtTotalAmountPaid = CalculateDebtResults();
                if (debtTotalAmountPaid > 0) {
                    CalculateSalaryFinanceResults(debtTotalAmountPaid);
                    $("#ResultArea").show();
                    $("#InputArea").hide();
                }

            } else {
                alert("Please provide the balance, monthly payment and APR of your credit card debt.");
                return;
            }

        });

    });

    //calculate results for the credit card debt
    function CalculateDebtResults() {

        //get the values from the UI
        var APR = parseFloat($('#txtCCAPR').val());
        var balance = parseFloat($('#txtCCBalance').val());
        var monthlyPayment = parseFloat($('#txtCCMonthlyPayment').val());

        var monthlyInterestRate = APR / 12; //calculate monthly interest rate
        var totalAmountRepaid = 0;
        var details = "";

        //loop through each month until the debt is repaid in full
        var monthsRemaining = 0;
        while (balance > 1) {
            monthsRemaining++;

            //calculate the part of this monthly payment
            var thisMonthInterest = balance * monthlyInterestRate / 100; // ... that is the interest
            var thisMonthPrincipal = monthlyPayment - thisMonthInterest; //  ...and the part that goes towards repaing the principal

            if (thisMonthPrincipal <= 0) {
                alert("Invalid data!");
                return 0;
            }

            //print results
            details += "Month " + monthsRemaining + ", Balance: " + parseFloat(balance).toFixed(2) + ", Interest: " + parseFloat(thisMonthInterest).toFixed(2) + ", Payment: " + parseFloat(monthlyPayment).toFixed(2) + "\r\n";

            //the balance is reduced with the principal and the total amount repaid is increased by the monthly payment
            balance -= thisMonthPrincipal;
            totalAmountRepaid += monthlyPayment;

        }

        //show results
        $("#CCResult").html("With your current situation, you have <strong>" + monthsRemaining + "</strong> number of months remaining until you pay off your credit card debt. The total amount that will be repaid is <strong>&pound;" + totalAmountRepaid + "</strong>.");
        $("#CCDetails").html("<pre>" + details + "</pre>");

        //return the amoung payed
        return totalAmountRepaid;

    }

    //calculate results for the salary finance loan. We assume that the employee wants to have the same monthly payment.
    function CalculateSalaryFinanceResults(totalAmountRepaidWithCC) {

        //get the values from the UI
        var APR = parseFloat($('#txtSFAPR').val());
        var balance = parseFloat($('#txtSFBalance').val());
        var monthlyPayment = parseFloat($('#txtSFMonthlySalaryDeduction').val());

        var monthlyInterestRate = APR / 12; //calculate monthly interest rate
        var totalAmountRepaid = 0;
        var details = "";

        //loop through each month until the debt is repaid in full
        var monthsRemaining = 0;
        while (balance > 1) {
            monthsRemaining++;

            //calculate the part of this monthly payment
            var thisMonthInterest = balance * monthlyInterestRate / 100; // ... that is the interest
            var thisMonthPrincipal = monthlyPayment - thisMonthInterest; //  ...and the part that goes towards repaing the principal

            if (thisMonthPrincipal <= 0) {
                alert("Invalid data!");
                return;
            }

            //print results
            details += "Month " + monthsRemaining + ", Balance: " + parseFloat(balance).toFixed(2) + ", Interest: " + parseFloat(thisMonthInterest).toFixed(2) + ", Payment: " + parseFloat(monthlyPayment).toFixed(2) + "\r\n";

            //the balance is reduced with the principal and the total amount repaid is increased by the monthly payment
            balance -= thisMonthPrincipal;
            totalAmountRepaid += monthlyPayment;

        }

        $("#SFResult").html("With SalaryFinance you will enjoy an very low APR of <strong>7.9%</strong>. Your monthly repayment amount will be <strong>" + monthlyPayment + "</strong>. You will be debt free in <strong>" + monthsRemaining + "</strong> months and you will save <strong>&pound;" + (totalAmountRepaidWithCC - totalAmountRepaid) + "</strong> !")
        $("#SFDetails").html("<pre>" + details + "</pre>");
    }

</script>

<style type="text/css">
    pre {
        font-size: 10px;
    }

    .margin-top-10 {
        margin-top: 10px;
    }

    .margin-top-30 {
        margin-top: 30px;
    }

</style>